---
import { useTranslations, type Language } from "../i18n";

interface Props {
  lang: Language;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const currentYear = new Date().getFullYear();

// Detect if we're on the home page
const pathname = Astro.url.pathname;
const isHomePage = pathname === "/" || pathname === "/en" || pathname === "/en/";
const homeBase = lang === "en" ? "/en" : "/";

const getHref = (anchor: string) => isHomePage ? anchor : `${homeBase}${anchor}`;

const footerLinks = [
  {
    title: t("footer.services"),
    links: [
      { label: t("footer.services.web"), href: getHref("#servicios") },
      { label: t("footer.services.mobile"), href: getHref("#servicios") },
      { label: t("footer.services.ecommerce"), href: getHref("#servicios") },
    ],
  },
  {
    title: t("footer.company"),
    links: [
      { label: t("footer.company.about"), href: getHref("#nosotros") },
      { label: t("footer.company.portfolio"), href: getHref("#portafolio") },
      { label: t("footer.company.contact"), href: getHref("#contacto") },
    ],
  },
];
---

<footer class="bg-primary-dark border-t border-white/10">
  <div class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <!-- Brand -->
      <div class="md:col-span-2">
        <img src="/devszeta-logo-white.png" alt="DevSZeta Logo" class="h-24 w-24 mb-4" />
        <p class="text-white/60 text-sm max-w-md mb-6">
          {t("footer.description")}
        </p>
      </div>

      <!-- Links -->
      {footerLinks.map((section) => (
        <div>
          <h4 class="font-semibold text-white mb-4">{section.title}</h4>
          <ul class="space-y-2">
            {section.links.map((link) => (
              <li>
                <a 
                  href={link.href} 
                  class="text-sm text-white/60 hover:text-accent transition-colors duration-300"
                >
                  {link.label}
                </a>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </div>

    <!-- Bottom -->
    <div class="border-t border-white/10 mt-12 pt-8 flex flex-col md:flex-row items-center justify-between gap-4">
      <p class="text-sm text-white/40">
        © {currentYear} DevSZeta. {t("footer.rights")}
      </p>
      <p class="text-sm text-white/40">
        {t("footer.developed")} <span class="text-accent">Santiago Zeledón Marín</span>
      </p>
    </div>
  </div>
</footer>
